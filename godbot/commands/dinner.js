// commands/dinner.js
const { SlashCommandBuilder } = require("discord.js");
const fs = require("fs");
const path = require("path");

const dinnerList = [
  
  "ì‚¼ê²¹ì‚´","ê³±ì°½","ë§‰ì°½","ì†Œê°ˆë¹„","LAê°ˆë¹„","ìŠ¤í…Œì´í¬","ì¹˜í‚¨","í”¼ì","íŒŒìŠ¤íƒ€","ì´ˆë°¥",
  "ìƒ¤ë¸Œìƒ¤ë¸Œ","ê°ìíƒ•","ë‹­ê°ˆë¹„","ì°œë‹­","í•´ë¬¼íƒ•","í•´ë¬¼ì°œ","ì „ê³¨","ë¶ˆê³ ê¸°","ì­ˆê¾¸ë¯¸ë³¶ìŒ",
  "ì˜¤ì‚¼ë¶ˆê³ ê¸°","ë³´ìŒˆ","ì¡±ë°œ","ë¹„ë¹”ëƒ‰ë©´","ë¬¼ëƒ‰ë©´","ì¹˜ì¦ˆëˆê¹ŒìŠ¤","ì—°ì–´ìŠ¤í…Œì´í¬","ì—°ì–´ìƒëŸ¬ë“œ",
  "ìƒëŸ¬ë“œë³¼","ì¹˜ì¦ˆë–¡ë³¶ì´","ë§¤ìš´ë–¡ë³¶ì´","ë¶ˆë‹­","ë§ˆë¼íƒ•","ë§ˆë¼ìƒ¹ê¶ˆ","ì¤‘ì‹ì½”ìŠ¤","ì–‘ê¼¬ì¹˜",
  "ì–‘ê°ˆë¹„","ë¼ë©˜","ë©˜ë³´ìƒ¤","íƒ•ìˆ˜ìœ¡","ì§œì¥ë©´","ì§¬ë½•","ê³ ì¶”ì¡ì±„","ì¡ì±„ë°¥","ë³¶ìŒë°¥","ìŠ¤ì‹œ",
  "ë¼ì´ìŠ¤ë²„ê±°","ë¶€ëŒ€ì°Œê°œ","ê¹€ì¹˜ì°Œê°œ","ëœì¥ì°Œê°œ","ìˆœë‘ë¶€ì°Œê°œ","í•¨ë°•ìŠ¤í…Œì´í¬","ì˜¤ë¯€ë¼ì´ìŠ¤",
  "ì¹´ë ˆ","ë‹­ë„ë¦¬íƒ•","ì–‘ë…ì¹˜í‚¨","ê°„ì¥ì¹˜í‚¨","í—ˆë‹ˆë²„í„°ì¹˜í‚¨","íŒŒë‹­","í•«ìœ™","ë´‰ì¶”ì°œë‹­","íŒŒì „", 
  "ë¹ˆëŒ€ë–¡","í•´ë¬¼íŒŒì „","êµ´ì „","ìœ¡ì „","ê¹€ì¹˜ì „","ê³±ì°½ì „ê³¨","ë²„ì„¯ì „ê³¨","ë‘ë¶€ê¹€ì¹˜","ë‘ë£¨ì¹˜ê¸°",
  "ì–‘ë…ê°ˆë¹„","ì œìœ¡ë³¶ìŒ","ë¶ˆë°±","ë¹„ë¹”ë°¥","ê³ ë“±ì–´ì¡°ë¦¼","ê°ˆì¹˜ì¡°ë¦¼","ì‚¼ì¹˜êµ¬ì´","ê½ì¹˜êµ¬ì´",
  "ì¡°ê¸°êµ¬ì´","ì²­êµ­ì¥","ìˆœëŒ€êµ­ë°¥","ì½©ë‚˜ë¬¼êµ­ë°¥","ì„¤ë íƒ•","ê³°íƒ•","ìœ¡ê°œì¥","ë‹­ê°œì¥","ì§¬ì§œë©´",
  "ì°¨ëŒëœì¥ì°Œê°œ","ë¼ì§€ê°ˆë¹„","ëª¨ë“¬íšŒ","ë°©ì–´íšŒ","ê´‘ì–´íšŒ","ì°¸ì¹˜íšŒ","ë‚™ì§€ë³¶ìŒ","ì˜¤ì§•ì–´ë³¶ìŒ",
  "ë¹„ë¹”êµ­ìˆ˜","êµ­ìˆ˜","ë¬¼íšŒ","ì½©êµ­ìˆ˜","ëƒ‰ë©´", "ë‹­ë°œ", "ë¬´ë¼ˆë‹­ë°œ", "ë‹­ëª©ì‚´êµ¬ì´", "ë¼ˆì—†ëŠ”ë‹­ê°ˆë¹„", "ì¹˜ì¦ˆë¶ˆë‹­", "ë‹­ë´‰êµ¬ì´", "ë‹­ë‚ ê°œêµ¬ì´", "í›ˆì œì˜¤ë¦¬", "ì˜¤ë¦¬ì£¼ë¬¼ëŸ­", "ì˜¤ë¦¬ë¶ˆê³ ê¸°",
"ì°¸ì¹˜ë§ˆìš”ë®ë°¥", "ì†Œê³ ê¸°ë®ë°¥", "ê·œë™", "ì°¨ìŠˆë®ë°¥", "í…ë™", "ì—ë¹„ë™", "ìœ ë¶€ì´ˆë°¥", "ëª¨ë‘ íŠ€ê¹€", "ì•¼ë¼ì†Œë°”", "ì˜¤ì½”ë…¸ë¯¸ì•¼ë¼",
"íƒ€ì½”ì•¼ë¼", "í…ë¬´ìŠ¤", "ì•¼ë¼ìš°ë™", "ì¹´ì´ì„¼ë™", "ê·œì¹´ì¸ ", "ìš°ë‹ˆë®ë°¥", "ëƒ‰ìš°ë™", "ë©˜ì¹˜ê¹ŒìŠ¤", "ê°ë°”ìŠ¤", "ìŠ¤í˜ì¸ì‹ ë¹ ì—ì•¼",
"ì´ë² ë¦¬ì½”ëª©ì‚´", "ë°”ë¹„íí­ë¦½", "ì‰¬ë¦¼í”„ë°•ìŠ¤", "í¬ë¦¼ìƒˆìš°", "ê¹í’ê¸°", "ê¹ì‡¼ìƒˆìš°", "ìœ ë¦°ê¸°", "ë§ˆíŒŒë‘ë¶€", "ìƒ¤ì˜¤ë¡±ë°”ì˜¤", "í› ê¶ˆ",
"í† ë§ˆí˜¸í¬ìŠ¤í…Œì´í¬", "ì•ˆì‹¬ìŠ¤í…Œì´í¬", "ì±„ëìŠ¤í…Œì´í¬", "Të³¸ìŠ¤í…Œì´í¬", "ë¦½ì•„ì´ìŠ¤í…Œì´í¬", "í•¨ë°•ì˜¤ë¯€ë¼ì´ìŠ¤", "í¬ë¦¼íŒŒìŠ¤íƒ€", "ë¡œì œíŒŒìŠ¤íƒ€", "ë´‰ê³¨ë ˆíŒŒìŠ¤íƒ€", "ì•Œë¦¬ì˜¤ì˜¬ë¦¬ì˜¤",
"ì•„ë§ˆíŠ¸ë¦¬ì¹˜ì•„ë‚˜", "ê¹Œë¥´ë³´ë‚˜ë¼", "ëª…ë€íŒŒìŠ¤íƒ€", "íŠ¸ëŸ¬í”ŒíŒŒìŠ¤íƒ€", "ìŠ¤í…Œì´í¬ìƒëŸ¬ë“œ", "ë°”ì§ˆí˜ìŠ¤í† ìƒëŸ¬ë“œ", "ê³ ë¥´ê³¤ì¡¸ë¼í”¼ì", "ë£¨ê¼´ë¼í”¼ì", "ì½°íŠ¸ë¡œì¹˜ì¦ˆí”¼ì", "ì‹œì¹´ê³ í”¼ì",
"ë”¥ë””ì‰¬í”¼ì", "ë¶ˆê³ ê¸°í”¼ì", "í˜í¼ë¡œë‹ˆí”¼ì", "í¬í…Œì´í† í”¼ì", "ê°ˆë¦­ë””í•‘í”¼ì", "ì¹˜ì¦ˆìŠ¤í‹±", "ëª¨ì§œë ë¼í•«ë„ê·¸", "ì½˜ì¹˜ì¦ˆ", "ë–¡ê°ˆë¹„", "ì†Œë¶ˆê³ ê¸°ë²„ê±°",
"ì¹˜í‚¨ë²„ê±°", "ìƒˆìš°ë²„ê±°", "ë”ë¸”ì¹˜ì¦ˆë²„ê±°", "ë² ì´ì»¨ì¹˜ì¦ˆë²„ê±°", "í–„ì¹˜ì¦ˆí† ìŠ¤íŠ¸", "ì—ê·¸ë“œë", "í”„ë Œì¹˜í† ìŠ¤íŠ¸", "ê°ìíŠ€ê¹€", "ê³ êµ¬ë§ˆíŠ€ê¹€", "ì¼€ì´ì¤€ê°ì",
"ì¹˜ì¦ˆë³¼", "ê¹€ë§ì´íŠ€ê¹€", "ì˜¤ì§•ì–´íŠ€ê¹€", "ìƒˆìš°íŠ€ê¹€", "ë§¤ìš´ì˜¤ì§•ì–´ë³¶ìŒë°¥", "ì œìœ¡ë®ë°¥", "ê¹€ì¹˜ë³¶ìŒë°¥", "ë‚™ì§€ë®ë°¥", "ì˜¤ì§•ì–´ë®ë°¥", "ë‚ ì¹˜ì•Œë³¶ìŒë°¥",
"ìš°ì‚¼ê²¹ë®ë°¥", "ê°„ì¥ê³„ë€ë°¥", "í† ë§ˆí† ë¦¬ì¡°ë˜", "ìƒˆìš°í¬ë¦¼ë¦¬ì¡°ë˜", "í•´ì‚°ë¬¼ë¹ ë„¤", "ì¹˜ì¦ˆë¦¬ì¡°ë˜", "ì „ë³µì£½", "ì°¸ì¹˜ì£½", "ì•¼ì±„ì£½", "ëˆ„ë£½ì§€íƒ•", "ì†Œê°ˆë¹„ì°œ", "ë¬µì€ì§€ì°œ", "ë¬µì€ì§€ê¹€ì¹˜ì°œ",
"ì°¨ëŒë°•ì´ì „ê³¨", "ë‚™ê³±ìƒˆ", "ê³±ë„ë¦¬íƒ•", "ë‹­í•œë§ˆë¦¬", "ë‹­ì¹¼êµ­ìˆ˜", "í•´ì¥êµ­", "ë¼ˆí•´ì¥êµ­",
"ë„ê°€ë‹ˆíƒ•", "ê¼¬ë¦¬ê³°íƒ•", "ì†Œë¨¸ë¦¬êµ­ë°¥", "ìˆœëŒ“êµ­", "ë‚´ì¥íƒ•", "ì•Œíƒ•", "ë¶ì–´êµ­", "í™©íƒœí•´ì¥êµ­", "ì‹œë˜ê¸°êµ­", "ë¬´êµ­",
"ê³„ë€êµ­", "ë–¡êµ­", "ë§Œë‘£êµ­", "ì°¸ì¹˜ê¹€ì¹˜ì°Œê°œ", "ê³ ë“±ì–´ê¹€ì¹˜ì¡°ë¦¼", "ê½ì¹˜ê¹€ì¹˜ì¡°ë¦¼", "ì½”ë‹¤ë¦¬ì¡°ë¦¼", "ì•„êµ¬ì°œ", "í™ì–´ì°œ",
"í™ì–´ì‚¼í•©", "ì°¸ê²Œë§¤ìš´íƒ•", "ë¯¼ë¬¼ìƒˆìš°ë§¤ìš´íƒ•", "ì¶”ì–´íƒ•", "ì¥ì–´êµ¬ì´", "ì¥ì–´ë®ë°¥", "ì¥ì–´íƒ•", "ì—°í¬íƒ•", "ë¬¸ì–´ìˆ™íšŒ", "ë¬¸ì–´ë¼ë©´",
"ì—°ì–´í¬ì¼€", "ì°¸ì¹˜í¬ì¼€", "íšŒë®ë°¥", "í•´ì´ˆë¹„ë¹”ë°¥", "ëª…ë€ë¹„ë¹”ë°¥", "ëª…ë€ë®ë°¥", "ìƒˆìš°ì¥ë®ë°¥", "ê°„ì¥ìƒˆìš°ë®ë°¥", "ì–‘ë…ê²Œì¥ë¹„ë¹”ë°¥", "ê½ƒê²Œíƒ•",
"ê²Œì‚´ì£½", "ê²Œì‚´ì˜¤ë¯ˆë ›", "ê²Œì‚´ìŠ¤í”„", "ê²Œì‚´ë³¶ìŒë°¥", "ê³ ì¶”ì¥ë¶ˆê³ ê¸°", "í›ˆì œì‚¼ê²¹ì‚´", "ëª©ì‚´ìŠ¤í…Œì´í¬", "í•­ì •ì‚´êµ¬ì´", "ê°€ë¸Œë¦¬ì‚´êµ¬ì´", "ë“±ì‹¬ìŠ¤í…Œì´í¬",
"ì°¨ëŒë°•ì´ë®ë°¥", "ì°¨ëŒëœì¥ë¹„ë¹”ë°¥", "ì¹˜ì¦ˆê³„ë€ë§ì´", "ìŠ¤íŒ¸ê³„ë€ë®ë°¥", "ìŠ¤íŒ¸ë§ˆìš”", "ì°¸ì¹˜ê¹€ë°¥", "ì†Œê³ ê¸°ê¹€ë°¥", "ë©¸ì¹˜ê¹€ë°¥", "ëˆê¹ŒìŠ¤ê¹€ë°¥", "ì œìœ¡ê¹€ë°¥",
"ë§¤ìš´ì¹˜í‚¨ë§ˆìš”", "ê°„ì¥ë¶ˆê³ ê¸°ë§ˆìš”", "í–„ë§ˆìš”", "ëª…ë€ë§ˆìš”", "ë‹­ê°•ì •", "ê°„ì¥ë‹­ê°•ì •", "ë§¤ìš´ë‹­ê°•ì •", "í›„ë¼ì´ë“œìˆœì‚´", "ì–‘ë…ìˆœì‚´", "í¬ë¦¬ë¯¸ì–‘ë…ì¹˜í‚¨",
"ë¶ˆí–¥ì¹˜í‚¨", "ë¡œì œë–¡ë³¶ì´", "ì°¨ëŒë–¡ë³¶ì´", "ë¡œì œë¶ˆë‹­", "ë§¤ìš´ë¹„ë¹”ìš°ë™", "ì°¨ëŒë¹„ë¹”êµ­ìˆ˜", "ëƒ‰ë¹„ë¹”ë©´", "ë¶ˆì«„ë©´", "ë¹„ë¹”ë©”ë°€", "ì˜¨ë©”ë°€", "ë¹„ë¹”ë§Œë‘", "ì°ë§Œë‘", "êµ°ë§Œë‘", "ë¬¼ë§Œë‘", "ê³ ê¸°ë§Œë‘", "ê¹€ì¹˜ë§Œë‘",
"ê°ˆë¹„ë§Œë‘", "ìƒˆìš°ë§Œë‘", "íŠ€ê¹€ë§Œë‘", "ë§Œë‘ì „ê³¨",
"ì«„ë©´", "ë¹„ë¹”ì«„ë©´", "ë¼ë©´ì‚¬ë¦¬ì „ê³¨", "ì¹˜ì¦ˆë¼ë©´", "ë¶€ëŒ€ë¼ë©´", "ì§œê³„ì¹˜", "ì°¨ëŒë¼ë©´", "íŒŒë¼ë©´", "ê¹€ì¹˜ë¼ë©´", "ë–¡ë¼ë©´",
"ë¼ë©´ë³¶ì´", "ì°¸ì¹˜ë¹„ë¹”ë©´", "ëƒ‰ë¼ë©´", "ì˜¤ì§•ì–´ë¹„ë¹”ë©´", "ëª…ë€ë¹„ë¹”ë©´", "ì†Œê³ ê¸°ë¬´êµ­", "ì†Œê³ ê¸°ë¯¸ì—­êµ­", "ëœì¥ë¬´êµ­", "ë‹¬ê±€ì°œ", "ê²Œë€ì¥",
"ëª…ë€ê³„ë€ì°œ", "ê°ìì¡°ë¦¼", "ì—°ê·¼ì¡°ë¦¼", "ìš°ì—‰ì¡°ë¦¼", "ë©”ì¶”ë¦¬ì•Œì¥ì¡°ë¦¼", "ì†Œë¶ˆê³ ê¸°", "ë²„ì„¯ë¶ˆê³ ê¸°", "ë‹­ë¶ˆê³ ê¸°", "ì–‘ì†¡ì´ìŠ¤í”„", "ì˜¥ìˆ˜ìˆ˜ìŠ¤í”„",
"ë¸Œë¡œì½œë¦¬ë³¶ìŒ", "ë²„ì„¯ë³¶ìŒ", "ë§ˆëŠ˜ì«‘ë³¶ìŒ", "ì˜¤ì§•ì–´ì±„ë³¶ìŒ", "ì§„ë¯¸ì±„ë³¶ìŒ", "ë©¸ì¹˜ë³¶ìŒ", "ê³„ë€ë³¶ìŒë°¥", "ìƒˆìš°ë³¶ìŒë°¥", "ì¹˜í‚¨ë³¶ìŒë°¥", "í–„ë³¶ìŒë°¥",
"ì°¸ì¹˜ë³¶ìŒë°¥", "êµ´ì†ŒìŠ¤ë³¶ìŒë°¥", "ì¡ì±„", "ì¡ì±„ë°¥", "ìœ ì‚°ìŠ¬ë°¥", "ê¹í’ìœ¡", "ë³¶ìŒì§¬ë½•", "ì‚¼ì„ ì§¬ë½•", "ì‚¼ì„ ìš°ë™", "ê³ ì¶”ì§¬ë½•",
"í•´ë¬¼ì§¬ë½•ë°¥", "ì§œì¥ë°¥", "ìŸë°˜ì§œì¥", "ìœ ë‹ˆì§œì¥", "ê¸°ìŠ¤ë©´", "ì‚¼ì„ ë¼ë©´", "ì¹˜ì¦ˆìš°ë™", "ì¹´ë ˆìš°ë™", "ë³¶ìŒìš°ë™", "í•´ë¬¼ìš°ë™",
"ë¡œì œìš°ë™", "ì°¸ê¹¨ì¹¼êµ­ìˆ˜", "ë°”ì§€ë½ì¹¼êµ­ìˆ˜", "ë§¤ìš´ì¹¼êµ­ìˆ˜", "ë“¤ê¹¨ì¹¼êµ­ìˆ˜", "ë‹­ì¹¼êµ­ìˆ˜", "ìˆ˜ì œë¹„", "ê°ììˆ˜ì œë¹„", "í•´ë¬¼ìˆ˜ì œë¹„", "ë“¤ê¹¨ìˆ˜ì œë¹„",
"ë¯¸ì—­êµ­ìˆ˜", "ì—´ë¬´êµ­ìˆ˜", "ì”ì¹˜êµ­ìˆ˜", "ìŒ€êµ­ìˆ˜", "ë¶„ì§œ", "ë°˜ì„ì˜¤", "íŒŸíƒ€ì´", "ì¹´ì˜¤íŒŸ", "ë˜ ì–Œê¿", "ë§ˆë¼ë³¶ìŒë©´"
  
];

const dataPath = path.join(__dirname, "../data/dinner-logs.json");

function loadData() {
  if (!fs.existsSync(dataPath)) return {};
  try {
    return JSON.parse(fs.readFileSync(dataPath, "utf8"));
  } catch {
    return {};
  }
}
function saveData(data) {
  fs.writeFileSync(dataPath, JSON.stringify(data, null, 2));
}

function getTodayStr() {
  const now = new Date();
  now.setHours(now.getHours() + 9); // KST
  return now.toISOString().slice(0, 10);
}

module.exports = {
  data: new SlashCommandBuilder()
    .setName("ì €ë©”ì¶”")
    .setDescription("ì €ë… ë©”ë‰´ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤."),

  async execute(interaction) {
    const userId = interaction.user.id;
    const today = getTodayStr();
    const data = loadData();

    if (!data[today]) data[today] = {};
    if (!data[today][userId]) data[today][userId] = 0;

    if (data[today][userId] >= 3) {
      await interaction.reply({ content: "ì˜¤ëŠ˜ì€ ì´ë¯¸ ì €ë…ë©”ë‰´ ì¶”ì²œì„ 3ë²ˆ ëª¨ë‘ ë°›ìœ¼ì…¨ìŠµë‹ˆë‹¤! ë‚´ì¼ ë‹¤ì‹œ ì´ìš©í•´ ì£¼ì„¸ìš” ğŸ˜Š", ephemeral: true });
      return;
    }

    data[today][userId] += 1;
    saveData(data);

    const food = dinnerList[Math.floor(Math.random() * dinnerList.length)];
    await interaction.reply({
      content: `ğŸ½ï¸ ì˜¤ëŠ˜ ì €ë…ì€ **${food}** ì–´ë•Œìš”? (ì˜¤ëŠ˜ ë‚¨ì€ ì¶”ì²œ: ${3 - data[today][userId]}íšŒ)`,
      ephemeral: true
    });
  }
};
