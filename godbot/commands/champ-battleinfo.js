const { SlashCommandBuilder, EmbedBuilder } = require("discord.js");

module.exports = {
  data: new SlashCommandBuilder()
    .setName("챔피언배틀안내")
    .setDescription("챔피언 배틀 시스템 최신 가이드!"),

  async execute(interaction) {
    const embed = new EmbedBuilder()
      .setTitle("⚔️ 챔피언 배틀 시스템 안내 (최신)")
      .setColor(0x406adc)
      .setDescription(
        "내가 보유한 챔피언으로 1:1 턴제 실시간 전투를 즐길 수 있어!\n\n"
        + "평타, 방어, 점멸, 아이템, 스킬 등 다양한 행동을 직접 버튼으로 선택하고, "
        + "각 챔피언 고유의 **패시브(지속효과)**도 자동으로 발동돼!\n"
        + "아래에서 실제 배틀의 흐름과 규칙, 편의 기능까지 한눈에 확인해봐."
      )
      .addFields(
        {
          name: "1. 배틀 시작 방법",
          value:
            "- `/챔피언배틀 [상대:@닉네임]`으로 1:1 배틀을 신청해!\n"
            + "- 상대가 수락해야 전투가 시작돼.\n"
            + "- 상대 미지정시: 아무나 수락 가능한 공개 배틀도 지원해.\n"
            + "- 한 번에 한 판만 진행 가능 (동시 배틀 불가)"
        },
        {
          name: "2. 턴제 전투 & 행동 버튼",
          value:
            "- 내 턴마다 아래 행동 중 1개만 버튼으로 선택 가능:\n"
            + "  • **🗡️ 공격**: 공격력/주문력에 따라 자동 피해 계산, 관통/방어/패시브 등 모두 반영\n"
            + "  • **🛡️ 방어**: 해당 턴 받는 피해 50% 감소 (일부 패시브/효과와 연동)\n"
            + "  • **💨 점멸(회피)**: 일정 확률로 상대 공격을 완전 회피\n"
            + "  • **🎒 아이템**: 보유 아이템 즉시 사용(회복/버프 등 효과 다양)\n"
            + "  • **✨ 스킬**: 챔피언 고유 스킬 (쿨타임/조건 있음, 준비중 메시지일 수도 있음)\n"
            + "  • **😴 쉬기(턴 넘기기)**: 아무 효과 없이 턴만 넘김 (행동불능/기절시 유일 선택)"
        },
        {
          name: "3. 턴과 패시브(자동효과) 시스템",
          value:
            "- **턴마다** 패시브, 버프/디버프, 쿨타임 등 자동으로 처리됨 (수동 조작 필요X)\n"
            + "- 모든 행동/효과/상태는 배틀창(임베드)에 실시간 표시됨\n"
            + "- 패시브, 버프, 디버프, 기절 등은 이모지로 한눈에 확인 가능"
        },
        {
          name: "4. 스킬/아이템/행동 오류 처리",
          value:
            "- 쿨타임/조건 미달 시 스킬은 사용할 수 없고, 안내 메시지로 알려줌\n"
            + "- 버튼 상호작용 오류, 중복 행동 등은 자동 복구/무시 처리\n"
            + "- **60초간 행동 없으면** 전투가 자동 종료됨"
        },
        {
          name: "5. 승패 판정 & 전적",
          value:
            "- 상대 체력이 0 이하가 되면 즉시 승리!\n"
            + "- 승리/패배/무승부 전적은 모두 저장\n"
            + "- 승패 결과는 배틀 임베드/챔피언 아이콘/로그로 한눈에!"
        },
        {
          name: "6. 추가 팁 & 유저 편의 기능",
          value:
            "- 모든 버튼/기능은 본인 턴에만 활성화돼. 상대 턴엔 누를 수 없어!\n"
            + "- [챔피언조회], [내챔피언] 명령어로 효과/스탯 상세 확인 가능\n"
            + "- 아이템/스킬 사용 후 즉시 효과 적용 및 로그 안내\n"
            + "- 버튼, UI, 시스템은 계속 개선/업데이트 예정!"
        }
      )
      .setFooter({ text: "궁금한 점은 /도움말, /챔피언조회, /내챔피언으로 언제든 확인! | 🌟까리한 디스코드🌟" });

    await interaction.reply({
      embeds: [embed],
      ephemeral: true
    });
  },
};
