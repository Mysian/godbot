// embeds/fishing-lore.js
// 모든 아이템/물고기/재화의 "한 줄 설명(로어)" + 헬퍼

/** 카테고리 이름 규칙
 *  fish, rod, float, bait, relic, junk, currency, key, chest
 *  (복수형/대소문자 섞여 들어와도 normalize로 정리)
 */
const ALIAS = {
  fish: "fish", fishes: "fish",
  rod: "rod", rods: "rod",
  float: "float", floats: "float",
  bait: "bait", baits: "bait",
  relic: "relic", relics: "relic",
  junk: "junk", junks: "junk",
  currency: "currency", coin: "currency", coins: "currency",
  key: "key", keys: "key",
  chest: "chest", chests: "chest",
};
const normalizeKind = (k) => ALIAS[String(k || "").toLowerCase()] || String(k || "").toLowerCase();
const trim = (s) => (typeof s === "string" ? s.trim() : "");

const LORE = {
  fish: {
    "클리오네의 정령": "클리오네를 수호하는 신비한 정령. 소문에 의하면 실제 클리오네도 잡을 수 있다고 한다.",
    "클리오네 성체": "바다의 복권이라고 불리우는 클리오네의 완전체다. 이 녀석을 만난 이후로 엄청난 바다의 행운이 느껴진다.",
    "철갑상어",
    "대왕고래",
    "루미나 샤크",
    "해룡 까리오스",
    "해룡 레비아탄",
    "용신 까리오스",
    "새끼 크라켄",
    "엔젤 고래",
    "곰치",
    "고래상어",
    "빨판상어",
    "청새치",
    "아귀",
    "에테르 피쉬",
    "덤보 문어",
    "샤이닝 해파리",
    "실러캔스",
    "안개 고래",
    "구름 잉어",
    "참치",
    "장어",
    "개복치",
    "문어",
    "거북이",
    "메기",
    "블롭피쉬",
    "그림자 장어",
    "별빛 잉어",
    "심연의 복어",
    "황금 잉어",
    "톱상어",
    "야광어",
    "유령고래",
    "메기 잉어",
    "잿빛 멸치",
    "밤의 잉어",
    "붉은 바다뱀",
    "마블 고등어",
    "달무늬 고래",
    "알콩이와 달콩이",
    "전갱이",
    "고등어",
    "가재",
    "연어",
    "다랑어",
    "가자미",
    "오징어",
    "잉어",
    "삼치",
    "복어",
    "황어",
    "도미",
    "참돔",
    "붕어",
    "비단 잉어",
    "빙어",
    "갈치",
    "큰입배스",
    "참다랑어",
    "황다랑어",
    "꼴뚜기",
    "쏠배감펭",
    "개구리",
    "홍게",
    "별점어",
    "돌꼬치",
    "붉은점 돌돔",
    "파도 송사리",
    "푸른 바다뱀",
    "푸른 복어",
    "두꺼비",
    "망둑어",
    "해파리",
    "멸치",
    "피라냐",
    "금붕어",
    "작은입배스",
    "홍어",
    "가오리",
    "우럭",
    "민어",
    "병어",
    "방어",
    "전어",
    "은어",
    "송어",
    "넙치",
    "청어",
    "꽁치",
    "쏘가리",
    "농어",
    "뼈 생선",
    "피라미",
    "해마",
    "앵무조개",
    "따분한 멸치",
    "등푸른 생선",
    "모래 송사리",
    "숭어"
  },
  rod: {
  "나무 낚싯대":  "내가 나무로 어떻게든 만들어낸 허름한 낚싯대. 뭐라도 낚이겠지..?",
  "강철 낚싯대":  "이 녀석 아주 견고해보이는데?",
  "금 낚싯대":    "번쩍번쩍! 물고기들을 유혹해주겠어!",
  "다이아 낚싯대": "완전 튼튼하잖아?! 이 낚시대라면 무엇이든 낚을 수 있겠어.",
  "전설의 낚싯대": "출처를 알 수 없는 전설의 낚싯대. 강태공이 사용했다고 전해진다."

  },
  float: {
  "동 찌": "적당한 찌",
  "은 찌": "견고한 찌",
  "금 찌": "단단한 찌",
  "다이아 찌": "매혹적인 찌"
  },
  bait: {
  "지렁이 미끼": "물고기들이 무난하게 좋아하는 미끼",
  "새우 미끼": "물고기들이 환장하는 미끼",
  "빛나는 젤리 미끼": "물고기들이 좋아죽는 미끼"
  },
  relic: {
  "에메랄드 상어 비늘": "고대 바다의 포식자였던 녀석의 전설적인 비늘 조각",
  "황금 지렁이": "미끼의 왕이다. 지렁이가 한을 품어 황금색이 되었다고 한다.",
  "황금 유령선 피규어": "고대인들이 갖고 놀던 피규어 같다. 침몰된 배에서 나왔다.",
  "낚시꾼의 증표": "베테랑 낚시꾼의 증표다. 이 증표를 지닌 자는 모든 낚시꾼의 선망의 대상이 된다.",
  "황금 상어의 지느러미": "존재 자체가 전설인 황금 상어의 전리품이다.",
  "용녀의 진주": "용왕의 딸이 지닌 귀중한 보옥이다. 당신의 손에 넘어간걸 알면 용왕이 가만두지 않을거다...",
  "인어공주의 비녀": "이 비녀를 잃어버린 인어공주는 슬픔에 잠겨 한동안 노래를 부르지 않을 것이다.",
  "낚시꾼의 모자": "베테랑 낚시꾼의 모자다. 머리가 더 커져서 그냥 바다에 버렸다고 하는데... 신고해야겠다.",
  "고대 용왕의 석판": "1대 용왕의 보물 중 하나다. 이 석판을 가진 자에게는 바다의 축복이 내려진다고 전해진다."
  },
  junk: {
    "빈 페트병": "누가 자꾸 쓰레기를 버리는거야?",
    "해초": "아니 이거 진짜 아무 쓸모가 없는거야??",
    "작은 새우": "나 이거 미끼로라도 쓸래 ㅠㅠ",
    "뚱이의 바지": "뚱이의 탐스러운 엉덩이가 떠오른다.",
    "갓봇의 안경": "안경을 잃어버린 갓봇은 한동안 버벅인다고 한다."
  },
  currency: {
    "파랑 정수": "까리 월드에서 전해지는 푸른 에너지. 공통 화폐로 쓰인다.",
    "낚시 코인": "낚시꾼들에게 주요한 화폐. 낚시용품점에서 사용이 가능하다."
  },
  key: {
    "까리한 열쇠": "무언가 열 수 있으려나..?"
  },
  chest: {
    "까리한 보물상자": "귀중한 무언가가 나올 수 있다, 열쇠를 찾아보자!"
  },
};

// === 헬퍼들 ===
function loreOf(kind, name) {
  const k = normalizeKind(kind);
  const n = trim(name);
  const s = LORE?.[k]?.[n];
  return trim(s);
}
function loreLine(kind, name) {
  const s = loreOf(kind, name);
  return s ? `_${s}_` : ""; // 이탤릭 한 줄
}

// 동적 추가가 필요할 때(코드로 즉석 등록)
function setLore(kind, name, text) {
  const k = normalizeKind(kind);
  const n = trim(name);
  if (!k || !n) return;
  LORE[k] = LORE[k] || {};
  LORE[k][n] = trim(text);
}

module.exports = { loreOf, loreLine, setLore, LORE };
